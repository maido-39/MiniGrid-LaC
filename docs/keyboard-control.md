# 키보드 제어 가이드

이 문서는 키보드를 사용하여 MiniGrid 환경을 제어하는 방법을 설명합니다.

## 사용법

```bash
conda activate minigrid
python keyboard_control.py
```

## 조작법

### 기본 조작

- `w`: 앞으로 이동 (move forward)
- `a`: 왼쪽으로 회전 (turn left)
- `d`: 오른쪽으로 회전 (turn right)
- `s`: 뒤로 이동 (move backward) - 일부 환경에서만 지원

### 환경 제어

- `r`: 환경 리셋
- `q`: 프로그램 종료

## 현재 환경

기본적으로 **실내 집 환경** (복도, 방, 차고 구조)이 로드됩니다.

### 환경 정보

- **크기**: 15x15
- **시작 위치**: 거실 (2, 2)
- **목표 위치**: 차고 (12, 12)
- **구조**: 복도, 방, 차고로 구성된 실내 집

### 환경 특징

- 복도와 방을 구분하는 내부 벽
- 여러 방으로 구성된 구조
- 차고와 복도를 구분하는 벽
- 다양한 객체 배치 (열쇠, 공 등)

## 화면 정보

OpenCV 창에 다음 정보가 표시됩니다:

- 환경 전체 구조
- 에이전트 위치 (빨간색 화살표)
- Goal 위치 (초록색 타일)
- 벽, 문, 객체 등

## 사용 팁

1. **방향 확인**: 에이전트는 빨간색 화살표로 표시되며, 화살표 방향이 에이전트가 바라보는 방향입니다.

2. **이동**: `w` 키를 눌러 앞으로 이동합니다. 벽이나 객체에 막히면 이동하지 않습니다.

3. **회전**: `a` 또는 `d` 키를 눌러 방향을 변경한 후 이동합니다.

4. **리셋**: 실수를 했거나 처음부터 다시 시작하려면 `r` 키를 누릅니다.

5. **종료**: `q` 키를 눌러 프로그램을 종료합니다.

## 문제 해결

### 창이 표시되지 않는 경우

- OpenCV가 제대로 설치되었는지 확인
- 디스플레이 환경 변수 확인 (X11 forwarding 등)

### 키 입력이 작동하지 않는 경우

- OpenCV 창이 포커스를 가지고 있는지 확인
- 창을 클릭하여 활성화

### 환경이 보이지 않는 경우

- 이미지 크기가 너무 클 수 있음
- `keyboard_control.py`의 이미지 크기 조정 부분 확인

## 코드 수정

다른 환경을 사용하려면 `keyboard_control.py`의 `main()` 함수를 수정하세요:

```python
# 다른 환경 사용 예시
from custom_environment import create_simple_room

env = create_simple_room()
env.render_mode = 'rgb_array'
```

## 참고

- [CustomRoomEnv API](./custom-environment-api.md)
- [환경 생성 가이드](./environment-creation.md)

